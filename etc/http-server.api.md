## API Report File for "@well-known-components/http-server"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

import type * as http from 'http';
import type * as https from 'https';
import { IBaseComponent } from '@well-known-components/interfaces';
import { IConfigComponent } from '@well-known-components/interfaces';
import { IFetchComponent } from '@well-known-components/interfaces';
import { IHttpServerComponent } from '@well-known-components/interfaces';
import type { ILoggerComponent } from '@well-known-components/interfaces';
import { IMetricsComponent } from '@well-known-components/interfaces';
import { IMiddlewareAdapterHandler } from '@well-known-components/interfaces';
import type { IStatusCheckCapableComponent } from '@well-known-components/interfaces';
import { Key } from 'path-to-regexp';
import type { Socket } from 'net';

// @public (undocumented)
export type AllowedMethodOptions = Partial<{
    throw: boolean;
    notImplemented: NewableFunction;
    methodNotAllowed: NewableFunction;
}>;

// @public
export function createServerComponent<Context extends object>(components: ServerComponents, options: Partial<IHttpServerOptions>): Promise<FullHttpServerComponent<Context>>;

// @public
export function createStatusCheckComponent<Context extends object = {}>(components: {
    server: IHttpServerComponent<Context>;
    config: IConfigComponent;
}): Promise<IBaseComponent>;

// @public
export function createTestServerComponent<Context extends object = {}>(): ITestHttpServerComponent<Context>;

// @public (undocumented)
export type FullHttpServerComponent<Context extends object> = IHttpServerComponent<Context> & IBaseComponent & IStatusCheckCapableComponent & {
    resetMiddlewares(): void;
};

// @public (undocumented)
export function getDefaultHttpMetrics(): IMetricsComponent.MetricsRecordDefinition<HttpMetrics>;

// @public (undocumented)
export function getUnderlyingServer<T>(server: IHttpServerComponent<any>): Promise<T>;

// Warning: (ae-forgotten-export) The symbol "metrics" needs to be exported by the entry point index.d.ts
//
// @public (undocumented)
export type HttpMetrics = keyof typeof metrics;

// @public (undocumented)
export type IHttpServerOptions = {
    cors?: CorsOptions;
} & ({
    https: https.ServerOptions;
} | {
    http: http.ServerOptions;
});

// @public (undocumented)
export function instrumentHttpServerWithPromClientRegistry<K extends string>(options: {
    server: IHttpServerComponent<IHttpServerComponent.DefaultContext<any>>;
    config: IConfigComponent;
    metrics: IMetricsComponent<K | HttpMetrics>;
    registry: IMetricsComponent.Registry;
}): Promise<void>;

// @public (undocumented)
export type ITestHttpServerComponent<Context extends object> = IHttpServerComponent<Context> & IFetchComponent & {
    resetMiddlewares(): void;
};

// @alpha (undocumented)
export type IWebSocketComponent<W = WebSocket> = {
    createWebSocket(url: string, protocols?: string | string[]): W;
};

// @public (undocumented)
export type RoutedContext<Context, Path extends string> = IHttpServerComponent.PathAwareContext<Context, Path> & {
    captures: string[];
    matched?: Layer<Context, Path>[];
    routerPath?: string;
};

// @public (undocumented)
export type RoutePathSignature<Context extends {}> = <T extends string>(path: T, ...middlewares: Array<IHttpServerComponent.IRequestHandler<RoutedContext<Context, T>>>) => Router<Context>;

// @public
export class Router<Context extends {}> implements IHttpServerComponent.MethodHandlers<Context> {
    constructor(opts?: RouterOptions);
    all<T extends string>(path: T, middleware: IHttpServerComponent.IRequestHandler<RoutedContext<Context, T>>): this;
    allowedMethods(options?: AllowedMethodOptions): IHttpServerComponent.IRequestHandler<Context>;
    // (undocumented)
    connect: RoutePathSignature<Context>;
    // (undocumented)
    delete: RoutePathSignature<Context>;
    // (undocumented)
    get: RoutePathSignature<Context>;
    // (undocumented)
    head: RoutePathSignature<Context>;
    match(path: string, method: string): {
        path: Layer<Context, string>[];
        pathAndMethod: Layer<Context, string>[];
        route: boolean;
    };
    // (undocumented)
    methods: (IHttpServerComponent.HTTPMethod | string)[];
    middleware(): IHttpServerComponent.IRequestHandler<Context>;
    // (undocumented)
    options: RoutePathSignature<Context>;
    // (undocumented)
    opts: RouterOptions;
    // (undocumented)
    patch: RoutePathSignature<Context>;
    // (undocumented)
    post: RoutePathSignature<Context>;
    prefix(prefix: string): this;
    // (undocumented)
    put: RoutePathSignature<Context>;
    redirect(source: string, destination: string, code?: number): this;
    // Warning: (ae-forgotten-export) The symbol "LayerOptions" needs to be exported by the entry point index.d.ts
    register<Path extends string>(path: Path, methods: ReadonlyArray<IHttpServerComponent.HTTPMethod>, middleware: IHttpServerComponent.IRequestHandler<Context>, opts?: LayerOptions): Layer<Context, Path>;
    // (undocumented)
    stack: Layer<Context, any>[];
    // (undocumented)
    trace: RoutePathSignature<Context>;
    use(...middlewares: IHttpServerComponent.IRequestHandler<RoutedContext<Context, string>>[]): this;
    // (undocumented)
    use<P extends string>(route: P, ...middlewares: IHttpServerComponent.IRequestHandler<RoutedContext<Context, P>>[]): this;
}

// @public (undocumented)
export type RouterOptions = Partial<{
    methods: IHttpServerComponent.HTTPMethod[];
    prefix: string;
    routerPath: string;
    sensitive: boolean;
    strict: boolean;
}>;

// @public (undocumented)
export type ServerComponents = {
    config: IConfigComponent;
    logs: ILoggerComponent;
    ws?: WebSocketServer;
};

// @beta (undocumented)
export type StandardStatusResponse = {
    status: "pass" | "fail" | "warn";
    version?: string;
    releaseId?: string;
    notes?: string[];
    output?: string;
    serviceId?: string;
    description?: string;
    details: Record<string, StandardStatusResponseDetail>;
};

// @beta (undocumented)
export type StandardStatusResponseDetail = {
    status: "pass" | "fail" | "warn";
    componentType?: string;
    componentId?: string;
};

// @alpha (undocumented)
export type TestServerWithWs = {
    ws(path: string, protocols: string | string[]): WebSocket;
};

// @alpha @deprecated (undocumented)
export interface WebSocketServer {
    // (undocumented)
    handleUpgrade(request: http.IncomingMessage, socket: Socket, upgradeHead: Buffer, callback: (client: any, request: http.IncomingMessage) => void): void;
}

// Warnings were encountered during analysis:
//
// dist/router.d.ts:20:5 - (ae-forgotten-export) The symbol "Layer" needs to be exported by the entry point index.d.ts
// dist/types.d.ts:19:5 - (ae-incompatible-release-tags) The symbol "ws" is marked as @public, but its signature references "WebSocketServer" which is marked as @alpha
// dist/types.d.ts:25:5 - (ae-forgotten-export) The symbol "CorsOptions" needs to be exported by the entry point index.d.ts

// (No @packageDocumentation comment for this package)

```
